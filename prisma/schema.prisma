datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                Int            @id @default(autoincrement())
  name              String
  email             String         @unique
  votes             Vote[]
  songVotes         SongVote[]
}

model Club {
  id                Int            @id @default(autoincrement())
  name              String?
  amenity           String
  addrCity          String?
  addrStreet        String?
  addrHouseNumber   String?
  addrpostcode      String?
  latitude          Float
  longitude         Float
  website           String?
  instagram         String?
  facebook          String?
  phone             String?
  email             String?
  nodeId            String
  rating            Float?
  information       String?
  votes             Vote[]
  playlists         Playlist[]
}

model Vote {
  id                Int            @id @default(autoincrement())
  userId            Int
  clubId            Int
  vote              Int
  week              DateTime
  user              User           @relation(fields: [userId], references: [id])
  club              Club           @relation(fields: [clubId], references: [id])
}

model Song {
  id                Int            @id @default(autoincrement())
  title             String
  artist            String
  playlists         Playlist[]
  songVotes         SongVote[]
}

model Playlist {
  id                Int            @id @default(autoincrement())
  clubId            Int
  songId            Int
  club              Club           @relation(fields: [clubId], references: [id])
  song              Song           @relation(fields: [songId], references: [id])
}

model SongVote {
  id                Int            @id @default(autoincrement())
  userId            Int
  songId            Int
  vote              Int
  week              DateTime
  user              User           @relation(fields: [userId], references: [id])
  song              Song           @relation(fields: [songId], references: [id])
}
